window.DashPlayer=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=35)}([function(e,t,n){"use strict";var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t,n){"use strict";var r=n(15)("wks"),o=n(16),i=n(0).Symbol,u="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=u&&i[e]||(u?i:o)("Symbol."+e))}).store=r},function(e,t,n){"use strict";var r=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=r)},function(e,t,n){"use strict";var r=n(4);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){return"object"===(void 0===e?"undefined":r(e))?null!==e:"function"==typeof e}},function(e,t,n){"use strict";var r,o,i,u,a,s,c,f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=n(61),d=n(78),p=Function.prototype.apply,h=Function.prototype.call,v=Object.create,y=Object.defineProperty,m=Object.defineProperties,g=Object.prototype.hasOwnProperty,b={configurable:!0,enumerable:!1,writable:!0};o=function(e,t){var n,o;return d(t),o=this,r.call(this,e,n=function(){i.call(o,e,n),p.call(t,this,arguments)}),n.__eeOnceListener__=t,this},a={on:r=function(e,t){var n;return d(t),g.call(this,"__ee__")?n=this.__ee__:(n=b.value=v(null),y(this,"__ee__",b),b.value=null),n[e]?"object"===f(n[e])?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},once:o,off:i=function(e,t){var n,r,o,i;if(d(t),!g.call(this,"__ee__"))return this;if(!(n=this.__ee__)[e])return this;if("object"===(void 0===(r=n[e])?"undefined":f(r)))for(i=0;o=r[i];++i)o!==t&&o.__eeOnceListener__!==t||(2===r.length?n[e]=r[i?0:1]:r.splice(i,1));else r!==t&&r.__eeOnceListener__!==t||delete n[e];return this},emit:u=function(e){var t,n,r,o,i;if(g.call(this,"__ee__")&&(o=this.__ee__[e]))if("object"===(void 0===o?"undefined":f(o))){for(n=arguments.length,i=new Array(n-1),t=1;t<n;++t)i[t-1]=arguments[t];for(o=o.slice(),t=0;r=o[t];++t)p.call(r,this,i)}else switch(arguments.length){case 1:h.call(o,this);break;case 2:h.call(o,this,arguments[1]);break;case 3:h.call(o,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,i=new Array(n-1),t=1;t<n;++t)i[t-1]=arguments[t];p.call(o,this,i)}}},s={on:l(r),once:l(o),off:l(i),emit:l(u)},c=m({},s),e.exports=t=function(e){return null==e?v(c):m(Object(e),s)},t.methods=a},function(e,t,n){"use strict";var r=n(7);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){"use strict";e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";e.exports=!n(19)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){"use strict";var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t,n){"use strict";var r=n(3),o=n(38),i=n(39),u=Object.defineProperty;t.f=n(8)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return u(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=window.Player},function(e,t,n){"use strict";var r=n(72)();e.exports=function(e){return e!==r&&null!==e}},function(e,t,n){"use strict";e.exports=!1},function(e,t,n){"use strict";var r=n(9),o=n(1)("toStringTag"),i="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,u;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:i?r(t):"Object"==(u=r(t))&&"function"==typeof t.callee?"Arguments":u}},function(e,t,n){"use strict";var r=n(2),o=n(0),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(13)?"pure":"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){"use strict";var r=0,o=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+o).toString(36))}},function(e,t,n){"use strict";var r=n(0),o=n(2),i=n(18),u=n(21),a=n(6),s=function e(t,n,s){var c,f,l,d,p=t&e.F,h=t&e.G,v=t&e.P,y=t&e.B,m=h?r:t&e.S?r[n]||(r[n]={}):(r[n]||{}).prototype,g=h?o:o[n]||(o[n]={}),b=g.prototype||(g.prototype={});for(c in h&&(s=n),s)l=((f=!p&&m&&void 0!==m[c])?m:s)[c],d=y&&f?a(l,r):v&&"function"==typeof l?a(Function.call,l):l,m&&u(m,c,l,t&e.U),g[c]!=l&&i(g,c,d),v&&b[c]!=l&&(b[c]=l)};r.core=o,s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,n){"use strict";var r=n(10),o=n(40);e.exports=n(8)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){"use strict";e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";var r=n(4),o=n(0).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,n){"use strict";var r=n(0),o=n(18),i=n(22),u=n(16)("src"),a=n(41),s=(""+a).split("toString");n(2).inspectSource=function(e){return a.call(e)},(e.exports=function(e,t,n,a){var c="function"==typeof n;c&&(i(n,"name")||o(n,"name",t)),e[t]!==n&&(c&&(i(n,u)||o(n,u,e[t]?""+e[t]:s.join(String(t)))),e===r?e[t]=n:a?e[t]?e[t]=n:o(e,t,n):(delete e[t],o(e,t,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[u]||a.call(this)}))},function(e,t,n){"use strict";var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,n){"use strict";e.exports={}},function(e,t,n){"use strict";var r=n(25),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){"use strict";var r=Math.ceil,o=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?o:r)(e)}},function(e,t,n){"use strict";var r,o,i,u=n(6),a=n(48),s=n(49),c=n(20),f=n(0),l=f.process,d=f.setImmediate,p=f.clearImmediate,h=f.MessageChannel,v=f.Dispatch,y=0,m={},g=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},b=function(e){g.call(e.data)};d&&p||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++y]=function(){a("function"==typeof e?e:Function(e),t)},r(y),y},p=function(e){delete m[e]},"process"==n(9)(l)?r=function(e){l.nextTick(u(g,e,1))}:v&&v.now?r=function(e){v.now(u(g,e,1))}:h?(i=(o=new h).port2,o.port1.onmessage=b,r=u(i.postMessage,i,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(r=function(e){f.postMessage(e+"","*")},f.addEventListener("message",b,!1)):r="onreadystatechange"in c("script")?function(e){s.appendChild(c("script")).onreadystatechange=function(){s.removeChild(this),g.call(e)}}:function(e){setTimeout(u(g,e,1),0)}),e.exports={set:d,clear:p}},function(e,t,n){"use strict";var r=n(7);function o(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new o(e)}},function(e,t,n){"use strict";var r=n(0).navigator;e.exports=r&&r.userAgent||""},function(e,t,n){"use strict";e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){"use strict";e.exports=function(e){return null!=e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={ArrayBufferToString:function(e){for(var t="",n=new Uint8Array(e),r=0;r<n.length;r++)t+=String.fromCharCode(n[r]);return t},StringToArrayBuffer:function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return t},Base64ToHex:function(e){for(var t=window.atob(e.replace(/-/g,"+").replace(/_/g,"/")),n="",r=0;r<t.length;r++)n+=("0"+t.charCodeAt(r).toString(16)).substr(-2);return n},HexToBase64:function(e){for(var t="",n=0;n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return window.btoa(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},findBox:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e.type!==t){if(e&&e.subBox){var o=e.subBox.filter((function(e){return e.type===t}));o.length?o.forEach((function(e){return n.push(e)})):e.subBox.forEach((function(e){return r.findBox(e,t,n)}))}}else n.push(e);return(n=[].concat(n)).length>1?n:n[0]},padStart:function(e,t,n){for(var r=String(n),o=t>>0,i=Math.ceil(o/r.length),u=[],a=String(e);i--;)u.push(r);return u.join("").substring(0,o-a.length)+a},durationConvert:function(e){var t=0,n=0,r=0;return(e=e.slice(e.indexOf("PT")+2)).indexOf("H")>-1&&e.indexOf("M")>-1&&e.indexOf("S")>-1?(t=parseFloat(e.slice(0,e.indexOf("H"))),n=parseFloat(e.slice(e.indexOf("H")+1,e.indexOf("M"))),r=parseFloat(e.slice(e.indexOf("M")+1,e.indexOf("S")))):e.indexOf("H")<0&&e.indexOf("M")>0&&e.indexOf("S")>-1?(n=parseFloat(e.slice(0,e.indexOf("M"))),r=parseFloat(e.slice(e.indexOf("M")+1,e.indexOf("S")))):e.indexOf("H")<0&&e.indexOf("M")<0&&e.indexOf("S")>-1&&(r=parseFloat(e.slice(0,e.indexOf("S")))),3600*t+60*n+r},preFixInterge:function(e,t){return(Array(t).join(0)+e).slice(-t)},toHex:function(){for(var e=[],t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return n.forEach((function(t){e.push(r.padStart(Number(t).toString(16),2,0))})),e},sum:function(){for(var e=0,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e+=t})),e},toUTF8:function(e){for(var t=encodeURIComponent(e),n=unescape(t),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n.charCodeAt(o);return r.buffer},fromHex:function(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2)t[n/2]=window.parseInt(e.substr(n,2),16);return t},fromCharCode:function(e){for(var t="",n=0;n<e.length;n+=16e3){var r=e.subarray(n,n+16e3);t+=String.fromCharCode.apply(null,r)}return t},toBase64:function(e,t){var n=r.fromCharCode(e);t=void 0===t||t;var o=window.btoa(n).replace(/\+/g,"-").replace(/\//g,"_");return t?o:o.replace(/=*$/,"")}};t.default=r,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(80),i=(r=o)&&r.__esModule?r:{default:r};function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.default=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.url,r=t.method,o=void 0===r?"GET":r,a=t.type,s=void 0===a?"arraybuffer":a,c=t.data,f=void 0===c?{}:c;return u(this,e),new Promise((function(e,t){var r=new window.XMLHttpRequest,u=o.toUpperCase(),a=[];s&&(r.responseType=s);var c=n.split("?"),l=f;if(c[1]&&Object.assign(l,i.default.parse(c[1])),"GET"===u){var d=Object.keys(l).length>0?c[0]+"?"+i.default.stringify(l):c[0];r.open(u,d),r.send()}else{if("post"!==u)throw new Error("xhr "+u+" is not supported");0===n.indexOf("data:application/json;base64")?(r.open(u,n,!0),r.timeout=0,r.withCredentials=!1,r.send(a)):(r.open(u,n),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.send(a.join("&")))}r.onload=function(){200===r.status||206===r.status?e(r):t(r)},r.onerror=function(){t(r)}}))},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5),u=(r=i)&&r.__esModule?r:{default:r};var a=function(){function e(t,n,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(0,u.default)(this),this.url=t,this.on=!1,!e.queue.some((function(e){return e.url===t}))){var o=new XMLHttpRequest;o.target=this,o.responseType="arraybuffer",o.open("get",t),r&&(this.range=r,this.id=r.join("-"),o.setRequestHeader("Range","bytes="+r.join("-"))),o.onload=function(){200===o.status||206===o.status?n&&n instanceof Function&&n(o.response):404===o.status&&n&&n instanceof Function&&n("Not Found"),o.target.remove()},o.onerror=function(){o.target.remove()},o.onabort=function(){o.target.remove()},this.xhr=o,e.queue.push(this),this.update()}}return o(e,[{key:"cancel",value:function(){this.xhr.abort()}},{key:"remove",value:function(){var t=this;e.queue.filter((function(n,r){return n.url===t.url&&(e.queue.splice(r,1),!0)})),this.update()}},{key:"update",value:function(){var t=e.queue,n=t.filter((function(e){return e.on})),r=t.filter((function(e){return!e.on})),o=e.limit-n.length;r.forEach((function(e,t){t<o&&e.run()}))}},{key:"run",value:function(){1===this.xhr.readyState?(this.on=!0,this.xhr.send()):this.remove()}}],[{key:"clear",value:function(){e.queue.forEach((function(e){e.on&&e.cancel()})),e.queue.length=0}}]),e}();a.queue=[],a.limit=2,window.Task=a,t.default=a,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=a(n(5)),i=a(n(11)),u=a(n(84));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=this;(0,o.default)(this),this.codecs=[],this.sourceBuffer={},this.mediaSource=new MediaSource,this.url=URL.createObjectURL(this.mediaSource),this.queue={},this.updating=!1,this.mediaSource.addEventListener("sourceopen",(function(){t.emit("sourceopen")})),this.mediaSource.addEventListener("sourceclose",(function(){t.emit("sourceclose")}))}return r(e,[{key:"addSourceBuffer",value:function(e){var t=this;this.codecs.push(e);var n=this.mediaSource.addSourceBuffer(e);this.sourceBuffer[e]=n,n.addEventListener("error",(function(e){t.emit("error",new u.default("mse","",{line:16,handle:"[MSE] constructor sourceopen",msg:e.message}))})),n.addEventListener("updateend",(function(r){if(t.emit(e+" updateend"),t.queue[e]&&"Array"===i.default.util.typeOf(t.queue[e])){var o=t.queue[e].shift();o&&(!1===n.updating&&"open"===t.state?n.appendBuffer(o):t.queue[e].unshift(o))}}))}},{key:"appendBuffer",value:function(e,t){var n=this.sourceBuffer[e];return!1===n.updating&&"open"===this.state?(n.appendBuffer(t),!0):(this.queue[e]||(this.queue[e]=[]),this.queue[e].push(t),!1)}},{key:"removeBuffer",value:function(e,t,n){!1===this.sourceBuffer[e].updating&&"open"===this.state&&this.sourceBuffer[e].remove(t,n)}},{key:"endOfStream",value:function(){"open"===this.state&&this.mediaSource.endOfStream()}},{key:"state",get:function(){return this.mediaSource.readyState}},{key:"duration",get:function(){return this.mediaSource.duration},set:function(e){this.mediaSource.duration=e}}],[{key:"isSupported",value:function(e){return window.MediaSource&&window.MediaSource.isTypeSupported(e)}}]),e}();t.default=s,e.exports=t.default},function(e,t,n){e.exports=n(36)},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n(37),n(57);var o=s(n(11)),i=s(n(60)),u=s(n(34)),a=s(n(33));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e,t){if("vod"===t.type&&e.duration-e.currentTime<2){var n=e.getBufferedRange();e.currentTime-n[1]<.1&&(e.mse.endOfStream(),e.dash.mse.progressTimer&&(clearInterval(e.dash.mse.progressTimer),e.dash.mse.progressTimer=null))}},f=function(e,t){t.vid=e.config.vid,t.url=e.src,t.errd&&"object"===r(t.errd)&&e.dash&&(t.errd.url=e.dash.url,t.url=e.dash.url),e.emit("DATA_REPORT",t),"network"===t.errt&&e.config._backupURL?e.src=e.config._backupURL:e.src=e.config._mainURL,e.switchURL=null,e._replay=null},l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=n,s=o.default.sniffer,l=[];r.config.preloadTime;if(["chrome","firfox","safari"].some((function(e){return e===s.browser}))&&u.default.isSupported('video/mp4; codecs="avc1.64001E, mp4a.40.5"')){var d=r.start,p=void 0;Object.defineProperty(r,"src",{get:function(){return r.currentSrc},set:function(e){r.config.url=e,r.paused?r.start(e):(r.pause(),r.once("pause",(function(){r.start(e)})),r.once("canplay",(function(){r.play()}))),r.once("canplay",(function(){r.currentTime=0}))},configurable:!0}),r.start=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.config.url;e&&(r.config.dashOpts&&r.config.dashOpts.drm&&!navigator.requestMediaKeySystemAccess?console.log("EME API is not supported. Enable pref media.eme.enabled to true in about:config"):((p=new i.default(e,r.config,r.video)).init(e).then((function(t){p.mpd.mediaList.video.forEach((function(e){l.push({name:e.height+"P",url:e.id,selected:!1})})),l[0].selected=!0,r.emit("resourceReady",l);var n=t;function o(){v(r.currentTime+1),c(r,p)}d.call(r,n.url),r.dash=p,r.mse=n,p.on("error",(function(e){f(r,e)})),p.once("startPlay",(function(){r.dash.mse.progressTimer=setInterval(o,r.config.progressTimer||300)})),r.on("error",(function(){r.dash.mse.progressTimer&&(clearInterval(r.dash.mse.progressTimer),r.dash.mse.progressTimer=null)})),r.switchURL=function(e){e=e.split("/")[e.split("/").length-1];var t=p.mpd.mediaList.video,n=t.selectedIdx;t.every((function(o,i){return o.id!==e||(n=i,p.getData(t[n].initSegment,t[n].initSegmentRange).then((function(e){!function(e){var o=r.currentTime,i=t[t.selectedIdx].mediaSegments.find((function(e){return e.start-o>6})),u=i.start,a=r.getBufferedRange()[1];a-u>0&&"safari"!==s.browser&&r.mse.removeBuffer(t[0].mimeType+';codecs="'+t[0].codecs+'"',u,a);t[t.selectedIdx].mediaSegments.every((function(e){return e.downloaded=!1,!0})),r.mse.appendBuffer(t[0].mimeType+';codecs="'+t[0].codecs+'"',e),r.mse.once(t[0].mimeType+';codecs="'+t[0].codecs+'" updateend',(function(){t[n].inited=!0,t.selectedIdx=n,v((i.start+i.end)/2)}))}(e)})),!1)}))},r.once("destroy",(function(){clearTimeout(p.mpd.timer)})),r._replay=function(){a.default.clear();var t=p.mpd.mediaList.video.selectedIdx;(p=new i.default(e,r.config,r.video)).init(e).then((function(e){l[t].selected=!0,r.emit("resourceReady",l);var n=e;d.call(r,n.url),r.dash=p,r.mse=n,r.currentTime=0,r.play(),r.on("error",(function(){r.dash.mse.progressTimer&&(clearInterval(r.dash.mse.progressTimer),r.dash.mse.progressTimer=null)})),p.once("startPlay",(function(){r.dash.mse.progressTimer=setInterval(o,r.config.progressTimer||300)}))}),(function(e){f(r,e)}))}}),(function(t){f(r,t),d.call(r,e)})),r.download=function(){p.download()}))};var h=function(e){var t=r.buffered;if(t)for(var n=0;n<t.length;n++)if(t.start(n)<=e&&t.end(n)>=e)return{start:t.start(n),end:t.end(n)}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.currentTime,t=h(e),n=t&&t.end||e;n>e+15||p.seek(n)}}return n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o.default);e.exports=l},function(e,t,n){"use strict";var r,o,i,u,a=n(13),s=n(0),c=n(6),f=n(14),l=n(17),d=n(4),p=n(7),h=n(42),v=n(43),y=n(47),m=n(26).set,g=n(50)(),b=n(27),_=n(51),x=n(28),w=n(52),S=s.TypeError,O=s.process,T=O&&O.versions,E=T&&T.v8||"",j=s.Promise,P="process"==f(O),M=function(){},k=o=b.f,C=!!function(){try{var e=j.resolve(1),t=(e.constructor={})[n(1)("species")]=function(e){e(M,M)};return(P||"function"==typeof PromiseRejectionEvent)&&e.then(M)instanceof t&&0!==E.indexOf("6.6")&&-1===x.indexOf("Chrome/66")}catch(e){}}(),A=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},F=function(e,t){if(!e._n){e._n=!0;var n=e._c;g((function(){for(var r=e._v,o=1==e._s,i=0,u=function(t){var n,i,u,a=o?t.ok:t.fail,s=t.resolve,c=t.reject,f=t.domain;try{a?(o||(2==e._h&&R(e),e._h=1),!0===a?n=r:(f&&f.enter(),n=a(r),f&&(f.exit(),u=!0)),n===t.promise?c(S("Promise-chain cycle")):(i=A(n))?i.call(n,s,c):s(n)):c(r)}catch(e){f&&!u&&f.exit(),c(e)}};n.length>i;)u(n[i++]);e._c=[],e._n=!1,t&&!e._h&&I(e)}))}},I=function(e){m.call(s,(function(){var t,n,r,o=e._v,i=L(e);if(i&&(t=_((function(){P?O.emit("unhandledRejection",o,e):(n=s.onunhandledrejection)?n({promise:e,reason:o}):(r=s.console)&&r.error&&r.error("Unhandled promise rejection",o)})),e._h=P||L(e)?2:1),e._a=void 0,i&&t.e)throw t.v}))},L=function(e){return 1!==e._h&&0===(e._a||e._c).length},R=function(e){m.call(s,(function(){var t;P?O.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})}))},B=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),F(t,!0))},N=function e(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw S("Promise can't be resolved itself");(n=A(t))?g((function(){var o={_w:r,_d:!1};try{n.call(t,c(e,o,1),c(B,o,1))}catch(e){B.call(o,e)}})):(r._v=t,r._s=1,F(r,!1))}catch(e){B.call({_w:r,_d:!1},e)}}};C||(j=function(e){h(this,j,"Promise","_h"),p(e),r.call(this);try{e(c(N,this,1),c(B,this,1))}catch(e){B.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(53)(j.prototype,{then:function(e,t){var n=k(y(this,j));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=P?O.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&F(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r;this.promise=e,this.resolve=c(N,e,1),this.reject=c(B,e,1)},b.f=k=function(e){return e===j||e===u?new i(e):o(e)}),l(l.G+l.W+l.F*!C,{Promise:j}),n(54)(j,"Promise"),n(55)("Promise"),u=n(2).Promise,l(l.S+l.F*!C,"Promise",{reject:function(e){var t=k(this);return(0,t.reject)(e),t.promise}}),l(l.S+l.F*(a||!C),"Promise",{resolve:function(e){return w(a&&this===u?j:this,e)}}),l(l.S+l.F*!(C&&n(56)((function(e){j.all(e).catch(M)}))),"Promise",{all:function(e){var t=this,n=k(t),r=n.resolve,o=n.reject,i=_((function(){var n=[],i=0,u=1;v(e,!1,(function(e){var a=i++,s=!1;n.push(void 0),u++,t.resolve(e).then((function(e){s||(s=!0,n[a]=e,--u||r(n))}),o)})),--u||r(n)}));return i.e&&o(i.v),n.promise},race:function(e){var t=this,n=k(t),r=n.reject,o=_((function(){v(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return o.e&&r(o.v),n.promise}})},function(e,t,n){"use strict";e.exports=!n(8)&&!n(19)((function(){return 7!=Object.defineProperty(n(20)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){"use strict";var r=n(4);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){"use strict";e.exports=n(15)("native-function-to-string",Function.toString)},function(e,t,n){"use strict";e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){"use strict";var r=n(6),o=n(44),i=n(45),u=n(3),a=n(24),s=n(46),c={},f={},l=e.exports=function(e,t,n,l,d){var p,h,v,y,m=d?function(){return e}:s(e),g=r(n,l,t?2:1),b=0;if("function"!=typeof m)throw TypeError(e+" is not iterable!");if(i(m)){for(p=a(e.length);p>b;b++)if((y=t?g(u(h=e[b])[0],h[1]):g(e[b]))===c||y===f)return y}else for(v=m.call(e);!(h=v.next()).done;)if((y=o(v,g,h.value,t))===c||y===f)return y};l.BREAK=c,l.RETURN=f},function(e,t,n){"use strict";var r=n(3);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&r(i.call(e)),t}}},function(e,t,n){"use strict";var r=n(23),o=n(1)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||i[o]===e)}},function(e,t,n){"use strict";var r=n(14),o=n(1)("iterator"),i=n(23);e.exports=n(2).getIteratorMethod=function(e){if(null!=e)return e[o]||e["@@iterator"]||i[r(e)]}},function(e,t,n){"use strict";var r=n(3),o=n(7),i=n(1)("species");e.exports=function(e,t){var n,u=r(e).constructor;return void 0===u||null==(n=r(u)[i])?t:o(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){"use strict";var r=n(0).document;e.exports=r&&r.documentElement},function(e,t,n){"use strict";var r=n(0),o=n(26).set,i=r.MutationObserver||r.WebKitMutationObserver,u=r.process,a=r.Promise,s="process"==n(9)(u);e.exports=function(){var e,t,n,c=function(){var r,o;for(s&&(r=u.domain)&&r.exit();e;){o=e.fn,e=e.next;try{o()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(s)n=function(){u.nextTick(c)};else if(!i||r.navigator&&r.navigator.standalone)if(a&&a.resolve){var f=a.resolve(void 0);n=function(){f.then(c)}}else n=function(){o.call(r,c)};else{var l=!0,d=document.createTextNode("");new i(c).observe(d,{characterData:!0}),n=function(){d.data=l=!l}}return function(r){var o={fn:r,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},function(e,t,n){"use strict";e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){"use strict";var r=n(3),o=n(4),i=n(27);e.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;var n=i.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var r=n(21);e.exports=function(e,t,n){for(var o in t)r(e,o,t[o],n);return e}},function(e,t,n){"use strict";var r=n(10).f,o=n(22),i=n(1)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t,n){"use strict";var r=n(0),o=n(10),i=n(8),u=n(1)("species");e.exports=function(e){var t=r[e];i&&t&&!t[u]&&o.f(t,u,{configurable:!0,get:function(){return this}})}},function(e,t,n){"use strict";var r=n(1)("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i=[7],u=i[r]();u.next=function(){return{done:n=!0}},i[r]=function(){return u},e(i)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(17),o=n(58),i=n(28),u=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i);r(r.P+r.F*u,"String",{padStart:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,n){"use strict";var r=n(24),o=n(59),i=n(29);e.exports=function(e,t,n,u){var a=String(i(e)),s=a.length,c=void 0===n?" ":String(n),f=r(t);if(f<=s||""==c)return a;var l=f-s,d=o.call(c,Math.ceil(l/c.length));return d.length>l&&(d=d.slice(0,l)),u?d+a:a+d}},function(e,t,n){"use strict";var r=n(25),o=n(29);e.exports=function(e){var t=String(o(this)),n="",i=r(e);if(i<0||i==1/0)throw RangeError("Count can't be negative");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=c(n(5)),i=c(n(79)),u=c(n(33)),a=c(n(34)),s=c(n(86));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];f(this,e),(0,o.default)(this),this.mse=void 0,this.url=t,this.inited=!1,r&&(this.video=r),n.dashOpts&&n.dashOpts.drm&&(this.eme=new s.default(n.dashOpts.drm))}return r(e,[{key:"getData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise((function(n,r){new u.default(e,n,t).once("error",(function(e){self.emit("error",e)}))}))}},{key:"init",value:function(e){var t=this,n=new i.default(e);this.mpd=n;var r=this,o=void 0,u=void 0,s=void 0;return new Promise((function(e,i){n.once("ready",(function(){r.type=n.type,u=n.mediaList.video,s=n.mediaList.audio,r.eme&&(r.eme.setOptions(u[u.selectedIdx].mimeType+'; codecs="'+u[u.selectedIdx].codecs+'"',s[s.selectedIdx].mimeType+'; codecs="'+s[s.selectedIdx].codecs+'"'),r.eme.SetupEME(r.video)),(o=new a.default).on("sourceopen",(function(){["video","audio"].forEach((function(e){var t=n.mediaList[e];o.addSourceBuffer(t[t.selectedIdx].mimeType+';codecs="'+t[t.selectedIdx].codecs+'"'),r.getData(t[t.selectedIdx].initSegment,t[t.selectedIdx].initSegmentRange).then((function(e){o.appendBuffer(t[0].mimeType+';codecs="'+t[0].codecs+'"',e),o.once(t[t.selectedIdx].mimeType+';codecs="'+t[t.selectedIdx].codecs+'" updateend',(function(){t[t.selectedIdx].inited=!0,o.emit("updateend")}))}))}))})),o.on("updateend",(function(e){u[u.selectedIdx].inited&&s[s.selectedIdx].inited&&(r.inited=!0,(u[u.selectedIdx].encrypted||s[s.selectedIdx].encrypted)&&r.eme.emit("encrypted"),"vod"===r.type&&(r.seek(0),r.emit("startPlay")))})),o.on("error",(function(e){i(e),console.log("mse error")})),r.mse=o,e(o)})),n.once("end",(function(){"live"===t.type&&r.mse.endOfStream()}))}))}},{key:"seek",value:function(e){var t=this,n=this.mpd.seek(e);["video","audio"].forEach((function(e){n[e].length>0&&n[e].every((function(n){if(n.downloaded)return!0;new u.default(n.url,(function(r){if("Not Found"===r){if(n.tryTimes||(n.tryTimes=0),n.tryTimes++,n.tryTimes<=2)return!0}else t.mse.appendBuffer(t.mpd.mediaList[e][0].mimeType+';codecs="'+t.mpd.mediaList[e][0].codecs+'"',new Uint8Array(r));var o=n.idx,i=t.mpd.mediaList[e];i[i.selectedIdx].mediaSegments.every((function(e){return e.idx!==o||(e.downloaded=!0,!1)}))}),n.range);return!0}))}))}}]),e}();t.default=l,e.exports=t.default},function(e,t,n){"use strict";var r=n(30),o=n(62),i=n(66),u=n(74),a=n(75);(e.exports=function(e,t){var n,o,s,c,f;return arguments.length<2||"string"!=typeof e?(c=t,t=e,e=null):c=arguments[2],r(e)?(n=a.call(e,"c"),o=a.call(e,"e"),s=a.call(e,"w")):(n=s=!0,o=!1),f={value:t,configurable:n,enumerable:o,writable:s},c?i(u(c),f):f}).gs=function(e,t,n){var s,c,f,l;return"string"!=typeof e?(f=n,n=t,t=e,e=null):f=arguments[3],r(t)?o(t)?r(n)?o(n)||(f=n,n=void 0):n=void 0:(f=t,t=n=void 0):t=void 0,r(e)?(s=a.call(e,"c"),c=a.call(e,"e")):(s=!0,c=!1),l={get:t,set:n,configurable:s,enumerable:c},f?i(u(f),l):l}},function(e,t,n){"use strict";var r=n(63),o=/^\s*class[\s{/}]/,i=Function.prototype.toString;e.exports=function(e){return!!r(e)&&!o.test(i.call(e))}},function(e,t,n){"use strict";var r=n(64);e.exports=function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!r(e)}},function(e,t,n){"use strict";var r=n(65);e.exports=function(e){if(!r(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch(e){return!1}}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(30),i={object:!0,function:!0,undefined:!0};e.exports=function(e){return!!o(e)&&hasOwnProperty.call(i,void 0===e?"undefined":r(e))}},function(e,t,n){"use strict";e.exports=n(67)()?Object.assign:n(68)},function(e,t,n){"use strict";e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,n){"use strict";var r=n(69),o=n(73),i=Math.max;e.exports=function(e,t){var n,u,a,s=i(arguments.length,2);for(e=Object(o(e)),a=function(r){try{e[r]=t[r]}catch(e){n||(n=e)}},u=1;u<s;++u)r(t=arguments[u]).forEach(a);if(void 0!==n)throw n;return e}},function(e,t,n){"use strict";e.exports=n(70)()?Object.keys:n(71)},function(e,t,n){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t,n){"use strict";var r=n(12),o=Object.keys;e.exports=function(e){return o(r(e)?Object(e):e)}},function(e,t,n){"use strict";e.exports=function(){}},function(e,t,n){"use strict";var r=n(12);e.exports=function(e){if(!r(e))throw new TypeError("Cannot use null or undefined");return e}},function(e,t,n){"use strict";var r=n(12),o=Array.prototype.forEach,i=Object.create,u=function(e,t){var n;for(n in e)t[n]=e[n]};e.exports=function(e){var t=i(null);return o.call(arguments,(function(e){r(e)&&u(Object(e),t)})),t}},function(e,t,n){"use strict";e.exports=n(76)()?String.prototype.contains:n(77)},function(e,t,n){"use strict";var r="razdwatrzy";e.exports=function(){return"function"==typeof r.contains&&(!0===r.contains("dwa")&&!1===r.contains("foo"))}},function(e,t,n){"use strict";var r=String.prototype.indexOf;e.exports=function(e){return r.call(this,e,arguments[1])>-1}},function(e,t,n){"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=s(n(5)),i=s(n(31)),u=s(n(32)),a=s(n(83));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.mediaList={video:[],audio:[]},this.retryMax=10,this.retry=0,this.type="live",this.isEnd=!1,this.duration=0,this.init(t),(0,o.default)(this)}return r(e,[{key:"fetch",value:function(t){var n=this,r={TYPE:"LIVE",ENDLIST:""},o=[];return new Promise((function(a,s){new u.default({type:"",url:t}).then((function(u){var c=u.responseText;if(c){var f=e.parseMPD(c);f||s(new Error("parse mpd error"));var l=[];"static"===f.type&&(r.TYPE="VOD"),f.minBufferTime&&(r.minBufferTime=i.default.durationConvert(f.minBufferTime)),f.maxSegmentDuration&&(r.maxSegmentDuration=i.default.durationConvert(f.maxSegmentDuration)),f.mediaPresentationDuration&&(n.duration=i.default.durationConvert(f.mediaPresentationDuration));var d="";f.BaseURL&&(d=f.BaseURL[0]);var p=f.Period[0];!n.duration&&p&&p.duration&&(n.duration=i.default.durationConvert(p.duration)),r.duration=n.duration,p.AdaptationSet.forEach((function(e,r){var o="video/mp4",u="avc1.64001E",a="640",s="360",c="25",f="1:1",p="1",h="588633";e.mimeType&&("video/mp4"===(o=e.mimeType)?(u=e.codecs,a=parseFloat(e.width),s=parseFloat(e.height),parseFloat(e.maxWidth),parseFloat(e.maxHeight),c=parseFloat(e.frameRate),f=e.sar,p=e.startWithSAP,h=parseFloat(e.bandwidth)):"audio/mp4"===o&&(u=e.codecs,p=e.startWithSAP,h=parseFloat(e.bandwidth))),e.Representation.forEach((function(r,v){l.indexOf(r.id)>-1&&(r.id=(parseInt(l[l.length-1])+1).toString()),l.push(r.id);var y="",m=[],g=0,b=0,_=t.slice(0,t.lastIndexOf("/")+1)+d;r.mimeType&&(o=r.mimeType),r.mimeType&&(o=r.mimeType),"video/mp4"===o?(r.codecs&&(u=r.codecs),r.width&&(a=parseFloat(r.width)),r.height&&(s=parseFloat(r.height)),r.maxWidth&&parseFloat(r.maxWidth),r.maxHeight&&parseFloat(r.maxHeight),r.frameRate&&(c=parseFloat(r.frameRate)),r.sar&&(f=r.sar),r.startWithSAP&&(p=r.startWithSAP),r.bandwidth&&(h=parseFloat(r.bandwidth))):"audio/mp4"===o&&(r.codecs&&(u=r.codecs),r.startWithSAP&&(p=r.startWithSAP),r.bandwidth&&(h=parseFloat(r.bandwidth))),r.BaseURL&&r.BaseURL.length>0&&(_+=r.BaseURL[0]);var x=void 0;e.SegmentTemplate&&e.SegmentTemplate.length>0&&(x=e.SegmentTemplate[0]),r.SegmentTemplate&&r.SegmentTemplate.length>0&&(x=r.SegmentTemplate[0]);var w=!1;if((e.ContentProtection||r.ContentProtection)&&(w=!0),x){y=x.initialization,g=parseFloat(x.timescale);for(var S=(b=parseFloat(x.duration))/g,O=parseInt(x.startNumber),T=O+Math.ceil(n.duration/S)-1,E=O;E<=T;E++){var j=S*(E-O),P=S*(E-O+1);E===T&&(S=n.duration-S*(T-O),P=n.duration),m.push({idx:E,start:j,end:P,url:_+x.media.replace("$RepresentationID$",r.id).replace("$Number%04d$",i.default.preFixInterge(E,4)),downloaded:!1,segmentDuration:S})}}"video/mp4"===o?n.mediaList.video.push({id:r.id,baseURL:_,initSegment:_+y.replace("$RepresentationID$",r.id),inited:!1,mediaSegments:m,mimeType:o,codecs:u,width:a,height:s,frameRate:c,sar:f,startWithSAP:p,bandwidth:h,timescale:g,duration:b,encrypted:w}):"audio/mp4"===o&&n.mediaList.audio.push({id:r.id,baseURL:_,initSegment:_+y.replace("$RepresentationID$",r.id),inited:!1,mediaSegments:m,mimeType:o,codecs:u,startWithSAP:p,bandwidth:h,timescale:g,duration:b,encrypted:w})}))})),["video","audio"].forEach((function(e){n.mediaList[e].selectedIdx=0,n.mediaList[e].sort((function(e,t){return e.bandwidth-t.bandwidth}))})),a({meta:r,segments:o})}else s(new Error("parse error"))})).catch((function(e){s(e)}))}))}},{key:"init",value:function(e){var t=this;this.fetch(e).then((function(e){t.type=e.meta.TYPE.toLocaleLowerCase(),t.emit("ready")}),(function(){console.log("mpd init reject"),["video","audio"].forEach((function(e){t.mediaList[e]=[]})),t.retry++,t.retry<t.retryMax&&t.init(e)}))}},{key:"seek",value:function(e){var t=this,n={};return"vod"!==this.type&&void 0===e||["video","audio"].forEach((function(r){var o=t.mediaList[r][t.mediaList[r].selectedIdx];n[r]=o.mediaSegments.filter((function(t){return(t.start<=e&&e<t.end||t.start<=e-t.segmentDuration&&e-t.segmentDuration<t.end||t.start<=e+t.segmentDuration&&e+t.segmentDuration<t.end)&&!t.downloaded}))})),n}}],[{key:"parseMPD",value:function(e){var t=void 0;if("string"==typeof e&&(t=e),e instanceof ArrayBuffer){var n=new Uint8Array(e);t=String.fromCharCode.apply(null,n)}return t?a.default.parse(t):null}}]),e}();t.default=c,e.exports=t.default},function(e,t,n){"use strict";t.decode=t.parse=n(81),t.encode=t.stringify=n(82)},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,i){t=t||"&",n=n||"=";var u={};if("string"!=typeof e||0===e.length)return u;var a=/\+/g;e=e.split(t);var s=1e3;i&&"number"==typeof i.maxKeys&&(s=i.maxKeys);var c=e.length;s>0&&c>s&&(c=s);for(var f=0;f<c;++f){var l,d,p,h,v=e[f].replace(a,"%20"),y=v.indexOf(n);y>=0?(l=v.substr(0,y),d=v.substr(y+1)):(l=v,d=""),p=decodeURIComponent(l),h=decodeURIComponent(d),r(u,p)?o(u[p])?u[p].push(h):u[p]=[u[p],h]:u[p]=h}return u};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e){switch(void 0===e?"undefined":r(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"===(void 0===e?"undefined":r(e))?u(a(e),(function(r){var a=encodeURIComponent(o(r))+n;return i(e[r])?u(e[r],(function(e){return a+encodeURIComponent(o(e))})).join(t):a+encodeURIComponent(o(e[r]))})).join(t):s?encodeURIComponent(o(s))+n+encodeURIComponent(o(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function u(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"parse",value:function(t){var n=e.parseXmlString(t);return null!=n?e.parseDOMChildren(n):null}},{key:"parseXmlString",value:function(e){if(void 0===e)return null;var t=void 0,n=new window.DOMParser;try{(t=n.parseFromString(e,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(t=null)}catch(e){t=null}return t}},{key:"parseDOMChildren",value:function(t,n){if(t.nodeType===Node.DOCUMENT_NODE){for(var r={},o=t.childNodes,i=0;i<o.length;i++){var u=o[i];u.nodeType===Node.ELEMENT_NODE&&(r=e.parseDOMChildren(u))}return r}if(t.nodeType===Node.ELEMENT_NODE){for(var a={__cnt:0},s=[],c=t.childNodes,f=0;f<c.length;f++){var l=c[f],d=e.getNodeLocalName(l);if(l.nodeType!==Node.COMMENT_NODE){var p=n+"."+d;if(a.__cnt++,null==a[d]){var h=e.parseDOMChildren(l,p);if("#text"!==d||/[^\s]/.test(h)){var v={};v[d]=h,s.push(v)}a[d]=h,e.toArrayAccessForm(a,d)}else{null!=a[d]&&(a[d]instanceof Array||(a[d]=[a[d]],e.toArrayAccessForm(a,d,p)));var y=e.parseDOMChildren(l,p);if("#text"!==d||/[^\s]/.test(y)){var m={};m[d]=y,s.push(m)}a[d][a[d].length]=y}}}for(var g=0;g<t.attributes.length;g++){var b=t.attributes[g];a.__cnt++;var _=b.value;a[b.name]=_}var x=t.prefix;return null!=x&&""!==x&&(a.__cnt++,a.__prefix=x),null!=a["#text"]&&(a.__text=a["#text"],a.__text instanceof Array&&(a.__text=a.__text.join("\n")),delete a["#text"],delete a["#text_asArray"]),null!=a["#cdata-section"]&&(a.__cdata=a["#cdata-section"],delete a["#cdata-section"],delete a["#cdata-section_asArray"]),1===a.__cnt&&null!=a.__text?a=a.__text:1===a.__cnt&&null!=a.__cdata&&(a=a.__cdata),delete a.__cnt,a}if(t.nodeType===Node.TEXT_NODE||t.nodeType===Node.CDATA_SECTION_NODE)return t.nodeValue}},{key:"getNodeLocalName",value:function(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!==t||(t=e.nodeName),t}},{key:"toArrayAccessForm",value:function(e,t){e[t]instanceof Array||(e[t]=[e[t]])}}]),e}();t.default=o,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(11),i=(r=o)&&r.__esModule?r:{default:r},u=n(85);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";a(this,t),r.version=u.version;var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));return i.url=o,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(i.default.Errors);t.default=c,e.exports=t.default},function(e){e.exports=JSON.parse('{"version":"1.1.8"}')},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=u(n(5)),i=u(n(31));u(n(32));function u(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.drm=t,this.KEYSYSTEM_TYPE="",this.keys={},this.drm.clearKeys&&(this.KEYSYSTEM_TYPE="org.w3.clearkey",this.keys=this.drm.clearKeys),this.options=[],this.ensurePromise=void 0,(0,o.default)(this)}return r(e,[{key:"setOptions",value:function(){var e=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],t={videoCapabilities:e},n={videoCapabilities:e,persistentState:"required",sessionTypes:["persistent-license"]};this.options=[n,t]}},{key:"bail",value:function(e){return function(t){console.log(e+(t?" "+t:""))}}},{key:"UpdateSessionFunc",value:function(e){var t=this;return function(n){var r=[],o=[];Object.keys(e).forEach((function(t){var n=e[t],u=i.default.fromHex(t),a=i.default.fromHex(n),s={kty:"oct",kid:i.default.toBase64(u,!1),k:i.default.toBase64(a,!1)};r.push(s),o.push(s.kid)}));var u={keys:r},a=JSON.stringify(u);n.target.update(i.default.StringToArrayBuffer(a)).then((function(){}),t.bail(" MediaKeySession update failed"))}}},{key:"KeysChange",value:function(e){var t=e.target.keyStatuses,n=!0,r=!1,o=void 0;try{for(var u,a=t.entries()[Symbol.iterator]();!(n=(u=a.next()).done);n=!0){var s=u.value,c=s[0];s[1],i.default.Base64ToHex(window.btoa(i.default.ArrayBufferToString(c)))}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}}},{key:"EnsureMediaKeysCreated",value:function(e,t,n){return this.ensurePromise||(this.ensurePromise=navigator.requestMediaKeySystemAccess(t,n).then((function(e){return e.createMediaKeys()}),this.bail(" Failed to request key system access.")).then((function(t){return e.setMediaKeys(t)}),this.bail(" failed to create MediaKeys object"))),this.ensurePromise}},{key:"SetupEME",value:function(e,t){var n=this;e.sessions=[],this.on("encrypted",(function(){var t=JSON.stringify({kids:["0123456789abcdef0123456789abcdef"]}),r=new Uint8Array(i.default.toUTF8(t));n.EnsureMediaKeysCreated(e,n.KEYSYSTEM_TYPE,n.options).then((function(){var t=e.mediaKeys.createSession();return e.sessions.push(t),t.addEventListener("message",n.UpdateSessionFunc(n.keys)),t.addEventListener("keystatuseschange",n.KeysChange),t.generateRequest("keyids",r.buffer)}),n.bail(" failed to ensure MediaKeys on HTMLMediaElement")).then((function(){}),n.bail(" Failed to generate request."))}))}}]),e}();t.default=a,e.exports=t.default}]);